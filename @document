# Authentication API Documentation

This document provides details on the authentication endpoints for user signup and social login.

## Environment Variables

The following environment variables must be set in your `.env` file:

### Database
- `DB_HOST`: Database host
- `DB_PORT`: Database port
- `DB_USERNAME`: Database username
- `DB_PASSWORD`: Database password
- `DB_DATABASE`: Database name

### JWT
- `JWT_SECRET`: Secret key for signing JWTs
- `JWT_EXPIRES_IN`: Expiration time for JWTs (e.g., `60m`, `1d`)

### Email (SMTP)
- `SMTP_HOST`: SMTP server host
- `SMTP_PORT`: SMTP server port
- `SMTP_SECURE`: Use `true` for SSL (port 465), `false` for others
- `SMTP_USER`: SMTP username
- `SMTP_PASS`: SMTP password
- `SMTP_FROM`: Default "from" email address

### Google OAuth
- `GOOGLE_CLIENT_ID`: Your Google OAuth client ID
- `GOOGLE_CLIENT_SECRET`: Your Google OAuth client secret
- `GOOGLE_CALLBACK_URL`: The callback URL for Google OAuth (e.g., `http://localhost:3000/auth/google/callback`)

### Kakao OAuth
- `KAKAO_CLIENT_ID`: Your Kakao app's REST API key
- `KAKAO_CALLBACK_URL`: The callback URL for Kakao login (e.g., `http://localhost:3000/auth/kakao/callback`)

---

## Endpoints

### 1. User Signup

- **Endpoint:** `POST /auth/signup`
- **Description:** Registers a new user with email and password.
- **Request Body:** `application/json`

```json
{
  "email": "user@example.com",
  "password": "StrongPassword123!",
  "name": "John Doe",
  "contact": "123-456-7890"
}
```

- **Validation Rules:**
  - `email`: Must be a valid email format.
  - `password`: Minimum 8 characters, must contain at least one uppercase letter, one lowercase letter, one number, and one special character.
  - `name`: Must not be empty.
  - `contact`: Must not be empty.

- **Success Response (201 Created):**

```json
{
  "message": "User registered successfully",
  "user": {
    "id": 1,
    "email": "user@example.com",
    "name": "John Doe",
    "contact": "123-456-7890"
  }
}
```

- **Error Responses:**
  - `400 Bad Request`: If validation fails. The response will include details about the validation errors.
  - `409 Conflict`: If an account with the provided email already exists.

```json
{
  "statusCode": 409,
  "message": "An account with this email already exists.",
  "error": "Conflict"
}
```

---

### 2. Social Signup/Login with Google

This flow uses OAuth 2.0.

1.  **Initiate Login:**
    - **Endpoint:** `GET /auth/google`
    - **Description:** Redirects the user to the Google login page to grant permissions.

2.  **Callback:**
    - **Endpoint:** `GET /auth/google/callback`
    - **Description:** Google redirects the user back to this endpoint after they have authenticated. The application handles user creation or login and then redirects the user to the frontend.
    - **Successful Redirect:** Upon successful authentication, the user is redirected to a frontend URL with a JWT in the query parameter. For example: `http://localhost:3000/login/success?token=<jwt_token>`

---

### 3. Social Signup/Login with Kakao

This flow is similar to Google's.

1.  **Initiate Login:**
    - **Endpoint:** `GET /auth/kakao`
    - **Description:** Redirects the user to the Kakao login page.

2.  **Callback:**
    - **Endpoint:** `GET /auth/kakao/callback`
    - **Description:** Kakao redirects the user back to this endpoint. The application processes the user's profile, creates or logs them in, and redirects them to the frontend with a JWT.
    - **Successful Redirect:** `http://localhost:3000/login/success?token=<jwt_token>`
---[END_OF_FILES]---